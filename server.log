🚀 AslanPay Root Server Starting...
📍 Environment: staging
📍 Port: 3000
🔧 Loading API server from api/server.js...
🚀 Starting AslanPay API Server - Reliable Auth System v3.0.0
🌍 Environment: staging
✅ Middleware configured for staging environment
🔍 Database environment detection:
   NODE_ENV: staging
   DATABASE_URL set: false
🔗 Database choice: In-Memory (Local Dev)
✅ In-memory database initialized for local development
👤 Test user created: test@local.dev / password123
🔑 Test API key: ak_live_3daa76481477...
🚀 In-memory database selected for local development
❌ Failed to load API server: Invalid value undefined for datasource "db" provided to PrismaClient constructor.
It should have this form: { url: "CONNECTION_STRING" }
Read more at https://pris.ly/d/client-constructor
Stack: PrismaClientConstructorValidationError: Invalid value undefined for datasource "db" provided to PrismaClient constructor.
It should have this form: { url: "CONNECTION_STRING" }
Read more at https://pris.ly/d/client-constructor
    at Object.datasources (/Users/coltonsakamoto/Desktop/agentpay/node_modules/@prisma/client/runtime/library.js:124:86)
    at Gl (/Users/coltonsakamoto/Desktop/agentpay/node_modules/@prisma/client/runtime/library.js:126:2527)
    at new t (/Users/coltonsakamoto/Desktop/agentpay/node_modules/@prisma/client/runtime/library.js:130:748)
    at new ProductionDatabase (/Users/coltonsakamoto/Desktop/agentpay/database-production.js:8:23)
    at Object.<anonymous> (/Users/coltonsakamoto/Desktop/agentpay/database-production.js:779:18)
    at Module._compile (node:internal/modules/cjs/loader:1554:14)
    at Object..js (node:internal/modules/cjs/loader:1706:10)
    at Module.load (node:internal/modules/cjs/loader:1289:32)
    at Function._load (node:internal/modules/cjs/loader:1108:12)
    at TracingChannel.traceSync (node:diagnostics_channel:322:14)
node:events:496
      throw er; // Unhandled 'error' event
      ^

Error: listen EADDRINUSE: address already in use :::3000
    at Server.setupListenHandle [as _listen2] (node:net:1937:16)
    at listenInCluster (node:net:1994:12)
    at Server.listen (node:net:2099:7)
    at Function.listen (/Users/coltonsakamoto/Desktop/agentpay/node_modules/express/lib/application.js:635:24)
    at Object.<anonymous> (/Users/coltonsakamoto/Desktop/agentpay/server.js:57:5)
    at Module._compile (node:internal/modules/cjs/loader:1554:14)
    at Object..js (node:internal/modules/cjs/loader:1706:10)
    at Module.load (node:internal/modules/cjs/loader:1289:32)
    at Function._load (node:internal/modules/cjs/loader:1108:12)
    at TracingChannel.traceSync (node:diagnostics_channel:322:14)
Emitted 'error' event on Server instance at:
    at emitErrorNT (node:net:1973:8)
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21) {
  code: 'EADDRINUSE',
  errno: -48,
  syscall: 'listen',
  address: '::',
  port: 3000
}

Node.js v22.14.0
