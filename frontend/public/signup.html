<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Join AslanPay - Developer Signup</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .error-message {
            background-color: #fef2f2;
            border: 1px solid #fecaca;
            color: #dc2626;
            padding: 12px;
            border-radius: 6px;
            margin-bottom: 16px;
            font-size: 14px;
        }
        .success-message {
            background-color: #f0fdf4;
            border: 1px solid #bbf7d0;
            color: #16a34a;
            padding: 12px;
            border-radius: 6px;
            margin-bottom: 16px;
            font-size: 14px;
        }
    </style>
</head>
<body class="bg-gradient-to-br from-blue-50 to-purple-50 min-h-screen flex items-center justify-center px-4">
    <div class="max-w-md w-full space-y-8">
        <!-- Header -->
        <div class="text-center">
            <div class="flex justify-center items-center space-x-3 mb-6">
                <div class="w-12 h-12 bg-orange-600 rounded-xl flex items-center justify-center">
                    <span class="text-white font-bold text-lg">AP</span>
                </div>
                <h1 class="text-3xl font-bold text-gray-900">AslanPay</h1>
            </div>
            <h2 class="text-xl text-gray-600 mb-2">Join the AI Commerce Revolution</h2>
            <p class="text-sm text-gray-500">Get API access and start building in minutes</p>
        </div>

        <!-- Signup Form -->
        <div class="bg-white rounded-xl shadow-lg p-8">
            <!-- Error/Success Messages -->
            <div id="message-container"></div>

            <form id="signup-form" class="space-y-6">
                <div>
                    <label for="name" class="block text-sm font-medium text-gray-700 mb-2">
                        Full Name *
                    </label>
                    <input 
                        type="text" 
                        id="name" 
                        required 
                        class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent"
                        placeholder="John Developer"
                    >
                </div>

                <div>
                    <label for="email" class="block text-sm font-medium text-gray-700 mb-2">
                        Email Address *
                    </label>
                    <input 
                        type="email" 
                        id="email" 
                        required 
                        class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent"
                        placeholder="developer@company.com"
                    >
                </div>

                <div>
                    <label for="password" class="block text-sm font-medium text-gray-700 mb-2">
                        Password *
                    </label>
                    <input 
                        type="password" 
                        id="password" 
                        required 
                        minlength="8"
                        class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent"
                        placeholder="At least 8 characters"
                    >
                    <p class="text-xs text-gray-500 mt-1">Minimum 8 characters required</p>
                </div>

                <div>
                    <label for="organizationName" class="block text-sm font-medium text-gray-700 mb-2">
                        Company/Organization (Optional)
                    </label>
                    <input 
                        type="text" 
                        id="organizationName" 
                        class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent"
                        placeholder="Your startup or project"
                    >
                </div>

                <div>
                    <label for="use-case" class="block text-sm font-medium text-gray-700 mb-2">
                        Primary Use Case
                    </label>
                    <select 
                        id="use-case" 
                        class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent"
                    >
                        <option value="">Select your use case</option>
                        <option value="chatbot">ChatGPT/AI Chatbot</option>
                        <option value="personal-assistant">Personal AI Assistant</option>
                        <option value="business-automation">Business Process Automation</option>
                        <option value="ecommerce">E-commerce Integration</option>
                        <option value="customer-service">Customer Service Bot</option>
                        <option value="workflow">Workflow Automation</option>
                        <option value="research">Research & Development</option>
                        <option value="other">Other</option>
                    </select>
                </div>

                <div class="flex items-center">
                    <input 
                        id="terms" 
                        type="checkbox" 
                        required 
                        class="h-4 w-4 text-orange-600 border-gray-300 rounded focus:ring-orange-500"
                    >
                    <label for="terms" class="ml-2 block text-sm text-gray-700">
                        I agree to the <a href="/terms-of-service.html" class="text-orange-600 hover:text-orange-800">Terms of Service</a> and <a href="/privacy-policy.html" class="text-orange-600 hover:text-orange-800">Privacy Policy</a>
                    </label>
                </div>

                <button 
                    type="submit" 
                    id="signup-button"
                    class="w-full bg-orange-600 text-white py-3 px-4 rounded-lg hover:bg-orange-700 transition-colors font-medium"
                >
                    Create Account â†’
                </button>
            </form>

            <!-- Divider -->
            <div class="mt-6 flex items-center">
                <div class="flex-1 border-t border-gray-300"></div>
                <span class="px-4 text-sm text-gray-500">Or</span>
                <div class="flex-1 border-t border-gray-300"></div>
            </div>

            <!-- Quick Demo Access -->
            <div class="mt-6 space-y-3">
                <button 
                    onclick="window.location.href='/dashboard'" 
                    class="w-full bg-gray-100 text-gray-700 py-2 px-4 rounded-lg hover:bg-gray-200 transition-colors text-sm"
                >
                    ðŸŽª Try Demo Dashboard (No Signup)
                </button>
                
                <button 
                    onclick="window.location.href='/demo'" 
                    class="w-full bg-gray-100 text-gray-700 py-2 px-4 rounded-lg hover:bg-gray-200 transition-colors text-sm"
                >
                    ðŸš€ Interactive Demo (No Signup)
                </button>
            </div>
        </div>

        <!-- Benefits -->
        <div class="bg-white rounded-xl shadow-lg p-6">
            <h3 class="text-lg font-semibold text-gray-900 mb-4">âœ¨ What You Get</h3>
            <div class="space-y-3">
                <div class="flex items-center space-x-3">
                    <span class="text-green-600">âœ…</span>
                    <span class="text-sm">Free API key with 1,000 monthly transactions</span>
                </div>
                <div class="flex items-center space-x-3">
                    <span class="text-green-600">âœ…</span>
                    <span class="text-sm">Complete SDK and documentation</span>
                </div>
                <div class="flex items-center space-x-3">
                    <span class="text-green-600">âœ…</span>
                    <span class="text-sm">Developer dashboard and analytics</span>
                </div>
                <div class="flex items-center space-x-3">
                    <span class="text-green-600">âœ…</span>
                    <span class="text-sm">Integration guides for all major AI frameworks</span>
                </div>
                <div class="flex items-center space-x-3">
                    <span class="text-green-600">âœ…</span>
                    <span class="text-sm">Priority support and onboarding</span>
                </div>
            </div>
        </div>

        <!-- Footer -->
        <div class="text-center text-sm text-gray-500">
            <p>Already have an account? <a href="/auth" class="text-orange-600 hover:text-orange-800">Sign in</a></p>
            <p class="mt-2">Questions? <a href="mailto:support@aslanpay.xyz" class="text-orange-600 hover:text-orange-800">Contact Support</a></p>
        </div>
    </div>

    <script>
        function showMessage(message, type = 'error') {
            const container = document.getElementById('message-container');
            const className = type === 'success' ? 'success-message' : 'error-message';
            container.innerHTML = `<div class="${className}">${message}</div>`;
            
            // Auto-hide success messages after 5 seconds
            if (type === 'success') {
                setTimeout(() => {
                    container.innerHTML = '';
                }, 5000);
            }
        }

        function clearMessage() {
            document.getElementById('message-container').innerHTML = '';
        }

        async function createAccount(formData) {
            const response = await fetch('/api/auth/signup', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify(formData)
            });

            const data = await response.json();
            
            if (!response.ok) {
                throw new Error(data.error || `HTTP ${response.status}: ${response.statusText}`);
            }
            
            return data;
        }

        document.getElementById('signup-form').addEventListener('submit', async function(e) {
            e.preventDefault();
            clearMessage();
            
            const button = document.getElementById('signup-button');
            const originalText = button.textContent;
            
            try {
                // Get form data
                const formData = {
                    name: document.getElementById('name').value.trim(),
                    email: document.getElementById('email').value.trim(),
                    password: document.getElementById('password').value,
                    organizationName: document.getElementById('organizationName').value.trim() || undefined,
                    useCase: document.getElementById('use-case').value || undefined
                };

                // Validate required fields
                if (!formData.name || !formData.email || !formData.password) {
                    showMessage('Please fill in all required fields.');
                    return;
                }

                if (formData.password.length < 8) {
                    showMessage('Password must be at least 8 characters long.');
                    return;
                }

                // Show loading state
                button.textContent = 'Creating Account...';
                button.disabled = true;
                button.className = 'w-full bg-gray-400 text-white py-3 px-4 rounded-lg font-medium cursor-not-allowed';

                // Make API call
                const result = await createAccount(formData);
                
                // Success!
                showMessage('Account created successfully! Redirecting to dashboard...', 'success');
                button.textContent = 'âœ… Success! Redirecting...';
                button.className = 'w-full bg-green-600 text-white py-3 px-4 rounded-lg font-medium';
                
                // Store user data and token
                if (result.token) {
                    localStorage.setItem('aslanpay_token', result.token);
                }
                if (result.user) {
                    localStorage.setItem('aslanpay_user', JSON.stringify(result.user));
                }
                
                // Redirect after short delay
                setTimeout(() => {
                    window.location.href = '/dashboard';
                }, 2000);
                
            } catch (error) {
                console.error('Signup error:', error);
                
                // Show specific error message
                let errorMessage = 'Account creation failed. Please try again.';
                
                if (error.message.includes('404')) {
                    errorMessage = 'Authentication service unavailable. Please try again later.';
                } else if (error.message.includes('MISSING_CREDENTIALS')) {
                    errorMessage = 'Please fill in all required fields.';
                } else if (error.message.includes('WEAK_PASSWORD')) {
                    errorMessage = 'Password must be at least 8 characters long.';
                } else if (error.message.includes('email')) {
                    errorMessage = 'Invalid email address or email already exists.';
                } else if (error.message) {
                    errorMessage = error.message;
                }
                
                showMessage(errorMessage);
                
                // Reset button
                button.textContent = originalText;
                button.disabled = false;
                button.className = 'w-full bg-orange-600 text-white py-3 px-4 rounded-lg hover:bg-orange-700 transition-colors font-medium';
            }
        });
    </script>
</body>
</html> 